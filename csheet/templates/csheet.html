<!DOCTYPE html> {% set config = {'database': database, 'pipeline': pipeline, 'prefix': prefix, 'is_pack': is_pack, 'is_web' : is_web, 'is_local':
is_local, 'relative_to' : relative_to} %}
<html lang="zh-CN">

<head>
    <meta charset="utf-8" />
    <title>
        {{ config['title'] }}
    </title>
    {% for i in static %} {% if i.endswith('.css') %}
    <link href="{{ static_folder }}/{{ i }}" rel="stylesheet" type="text/css" /> {% elif i in ('html5shiv.min.html', ) %}
    <!--[if lt IE 9]>
	<script src="{{ static_folder }}/{{ i }}"></script>
    <![endif]-->
    {% elif i.endswith('.js') %}
    <script src="{{ static_folder }}/{{ i }}"></script> {% endif %} {% endfor %}
    <!--[if IE]>
    <script type="text/javascript">
    alert('请使用现代浏览器浏览本页面');
    // window.open("http://outdatedbrowser.com/zh-cn", "_self");
    </script>
    <![endif]-->
</head>

<body>
    <header>
        <div class="count">
            {{ images.__len__() }}
        </div>
        <div class="noscript">
            <noscript>
                需要浏览器启用javascript
            </noscript>
        </div>
        <nav>
            {% block nav %} {% endblock %}
        </nav>
        <div class="help hidden">
            <table>
                <tr>
                    <th>快捷键</th>
                    <th>用途</th>
                </tr>
                <tr>
                    <td>双击空白处</td>
                    <td>切换至动图</td>
                </tr>
                <tr>
                    <td>拖动图片</td>
                    <td>可拖入其他软件(例如 Nuke、资源管理器)</td>
                </tr>
            </table>
        </div>
    </header>
    <ul class="images">
        {% for image in images %}
        <li class="lightbox" id="image{{ loop.index }}" data-drag="{{ image.get_drag(**config) }}">
            <a href="#image{{ loop.index }}" class="zoom">
                <figure class="small">
                    <video class='hidden' data-poster="{{ image.get('thumb', **config) }}" data-src="{{ image.get('preview', **config) }}" muted
                        loop>
                        <img alt="no image" data-src="{{ image.get('thumb', **config) }}" />
                    </video>
                    <div class="noscript">
                        <noscript>
                            <video poster="{{ image.get('thumb', **config) }}" src="{{ image.get('preview', **config) }}" muted loop>
                                <img alt="no image" src="{{ image.get('thumb', **config) }}" />
                            </video>
                        </noscript>
                    </div>
                    <figcaption>
                        {{ image.name | e }}
                        <!-- SNJYW_EP26_01_
                        <span class="highlight">
                            sc001
                        </span> -->
                    </figcaption>
                </figure>
            </a>
            <div class="viewer">
                <div class="detail">

                </div>
                <a class="close" href="#void">
                </a>
                <figure class="full">
                    <video class='hidden' data-poster="{{ image.get('full', **config) }}" data-src="{{ image.get('preview', **config) }}" draggable="true">
                        <a href="{{ image.get('full', **config) }}" target="_blank">
                            <img alt="no image" data-src="{{ image.get('full', **config) }}" />
                        </a>
                    </video>
                    <div class="noscript">
                        <noscript>
                            <video poster="{{ image.get('full', **config) }}" src="{{ image.get('preview', **config) }}" draggable="true">
                                <a href="{{ image.get('full', **config) }}" target="_blank">
                                    <img alt="no image" src="{{ image.get('full', **config) }}" />
                                </a>
                            </video>
                        </noscript>
                    </div>
                    <figcaption>
                        {{ image | e }}
                    </figcaption>
                </figure>
                <a class="prev" href="#image{{ loop.index - 1 }}">
                </a>
                <a class="next" href="#image{{ loop.index + 1 }}">
                </a> {% block viewer %} {% endblock %}
            </div>
        </li>
        {% endfor %}
    </ul>
</body>

</html>